# 顺序执行用时: 521.8565858150005

    0     2     4     6     8     ...     5990   5992   5994   5996   5998
0      0     0     0     0     0  ...        0      0      0      0      0
2      0     0     2     3     4  ...     2995   2996   2997   2998   2999
4      0     2     0     6     8  ...     5990   5992   5994   5996   5998
6      0     3     6     0    12  ...     8985   8988   8991   8994   8997
8      0     4     8    12     0  ...    11980  11984  11988  11992  11996
10     0     5    10    15    20  ...    14975  14980  14985  14990  14995
12     0     6    12    18    24  ...    17970  17976  17982  17988  17994
14     0     7    14    21    28  ...    20965  20972  20979  20986  20993
16     0     8    16    24    32  ...    23960  23968  23976  23984  23992
18     0     9    18    27    36  ...    26955  26964  26973  26982  26991
20     0    10    20    30    40  ...    29950  29960  29970  29980  29990
22     0    11    22    33    44  ...    32945  32956  32967  32978  32989
24     0    12    24    36    48  ...    35940  35952  35964  35976  35988
26     0    13    26    39    52  ...    38935  38948  38961  38974  38987
28     0    14    28    42    56  ...    41930  41944  41958  41972  41986
30     0    15    30    45    60  ...    44925  44940  44955  44970  44985
32     0    16    32    48    64  ...    47920  47936  47952  47968  47984
34     0    17    34    51    68  ...    50915  50932  50949  50966  50983
36     0    18    36    54    72  ...    53910  53928  53946  53964  53982
38     0    19    38    57    76  ...    56905  56924  56943  56962  56981


# 6个线程 + 线程锁 执行用时: 1201.006736373
    2   4   6   8   10  12  14  16  18
2    0   2   3   4   5   6   7   8   9
4    2   0   6   8  10  12  14  16  18
6    3   6   0  12  15  18  21  24  27
8    4   8  12   0  20  24  28  32  36
10   5  10  15  20   0  30  35  40  45
12   6  12  18  24  30   0  42  48  54
14   7  14  21  28  35  42   0  56  63
16   8  16  24  32  40  48  56   0  72
18   9  18  27  36  45  54  63  72   0


# 6个线程[不加线程锁] 执行用时: 1697.6634921659997
    0   2   4   6   8   10  12  14  16  18
0    0   0   0   0   0   0   0   0   0   0
2    0   0   2   3   4   5   6   7   8   9
4    0   2   0   6   8  10  12  14  16  18
6    0   3   6   0  12  15  18  21  24  27
8    0   4   8  12   0  20  24  28  32  36
10   0   5  10  15  20   0  30  35  40  45
12   0   6  12  18  24  30   0  42  48  54
14   0   7  14  21  28  35  42   0  56  63
16   0   8  16  24  32  40  48  56   0  72
18   0   9  18  27  36  45  54  63  72   0


# 3个线程[不加线程锁] 执行用时: 1361.0345255029997
    0   2   4   6   8   10  12  14  16  18
0    0   0   0   0   0   0   0   0   0   0
2    0   0   2   3   4   5   6   7   8   9
4    0   2   0   6   8  10  12  14  16  18
6    0   3   6   0  12  15  18  21  24  27
8    0   4   8  12   0  20  24  28  32  36
10   0   5  10  15  20   0  30  35  40  45
12   0   6  12  18  24  30   0  42  48  54
14   0   7  14  21  28  35  42   0  56  63
16   0   8  16  24  32  40  48  56   0  72
18   0   9  18  27  36  45  54  63  72   0


# 1个线程[不加线程锁] 执行用时: 709.8819881269992
    0   2   4   6   8   10  12  14  16  18
0    0   0   0   0   0   0   0   0   0   0
2    0   0   2   3   4   5   6   7   8   9
4    0   2   0   6   8  10  12  14  16  18
6    0   3   6   0  12  15  18  21  24  27
8    0   4   8  12   0  20  24  28  32  36
10   0   5  10  15  20   0  30  35  40  45
12   0   6  12  18  24  30   0  42  48  54
14   0   7  14  21  28  35  42   0  56  63
16   0   8  16  24  32  40  48  56   0  72
18   0   9  18  27  36  45  54  63  72   0


Process finished with exit code 0


---------------------------------------------------------
使用 doc_vector_model.similarity(text_a, text_b) 方法:

		计算余弦相似度矩阵用时: 0.01267099380493164
		过滤字符串空格用时: 5.245208740234375e-05





---------------------------------------------------------
添加所有文档用时: 5.322832107543945
计算余弦相似度用时: 742.1363198757172

          1125      1126      1127    ...         1142      1143      1144
1125  1.000000 -0.221840  0.481278    ...     0.143910  0.219095  0.326369
1126 -0.221840  1.000000 -0.258754    ...     0.488052  0.484212  0.030445
1127  0.481278 -0.258754  1.000000    ...    -0.012275  0.078208  0.261550
1128 -0.027596  0.337057 -0.015624    ...     0.157959  0.245849  0.115471
1129  0.032804  0.313685  0.030173    ...     0.265885  0.335296  0.152752
1130 -0.054631  0.259467 -0.080770    ...     0.157565  0.129521  0.004192
1131 -0.114067  0.357546 -0.214617    ...     0.036132  0.051139 -0.151080
1132 -0.055951  0.539841  0.065428    ...     0.229600  0.160199  0.237880
1133  0.216565 -0.238606  0.585450    ...    -0.042359 -0.043671 -0.087257
1134  0.224792 -0.154909  0.367064    ...     0.056839 -0.056767 -0.154751
1135 -0.056139 -0.329802  0.136841    ...    -0.226880 -0.158409  0.045883
1136  0.056177  0.716704 -0.056092    ...     0.635675  0.499582  0.095820
1137  0.186901  0.312293 -0.048165    ...     0.664341  0.558390  0.228079
1138  0.301283  0.375052  0.126108    ...     0.777904  0.647327  0.182567
1139  0.039370  0.031279 -0.107491    ...    -0.173752 -0.061356  0.191519
1140 -0.070454  0.167893 -0.143106    ...     0.147701  0.155362  0.008056
1141  0.120045  0.170477  0.086973    ...     0.278906  0.283856  0.237730
1142  0.143910  0.488052 -0.012275    ...     1.000000  0.659528  0.342209
1143  0.219095  0.484212  0.078208    ...     0.659528  1.000000  0.349740
1144  0.326369  0.030445  0.261550    ...     0.342209  0.349740  1.000000


-----------------------------------------------------------------
本次计算在余弦相似度矩阵处只计算了一半, 因此矩阵的右下角部分的数值是没有改变的, 不能这样计算(因为程序是按行计算的, 不到最后右下角的部分是计算不到的)

cosine_matrix.iloc[:20, :20]:
           1125      1126      1127    ...         1142      1143      1144
1125  1.000000 -0.221840  0.481278    ...     0.143910  0.219095  0.326369
1126 -0.221840  1.000000 -0.258754    ...     0.488052  0.484212  0.030445
1127  0.481278 -0.258754  1.000000    ...    -0.012275  0.078208  0.261550
1128 -0.027596  0.337057 -0.015624    ...     0.157959  0.245849  0.115471
1129  0.032804  0.313685  0.030173    ...     0.265885  0.335296  0.152752
1130 -0.054631  0.259467 -0.080770    ...     0.157565  0.129521  0.004192
1131 -0.114067  0.357546 -0.214617    ...     0.036132  0.051139 -0.151080
1132 -0.055951  0.539841  0.065428    ...     0.229600  0.160199  0.237880
1133  0.216565 -0.238606  0.585450    ...    -0.042359 -0.043671 -0.087257
1134  0.224792 -0.154909  0.367064    ...     0.056839 -0.056767 -0.154751
1135 -0.056139 -0.329802  0.136841    ...    -0.226880 -0.158409  0.045883
1136  0.056177  0.716704 -0.056092    ...     0.635675  0.499582  0.095820
1137  0.186901  0.312293 -0.048165    ...     0.664341  0.558390  0.228079
1138  0.301283  0.375052  0.126108    ...     0.777904  0.647327  0.182567
1139  0.039370  0.031279 -0.107491    ...    -0.173752 -0.061356  0.191519
1140 -0.070454  0.167893 -0.143106    ...     0.147701  0.155362  0.008056
1141  0.120045  0.170477  0.086973    ...     0.278906  0.283856  0.237730
1142  0.143910  0.488052 -0.012275    ...     1.000000  0.659528  0.342209
1143  0.219095  0.484212  0.078208    ...     0.659528  1.000000  0.349740
1144  0.326369  0.030445  0.261550    ...     0.342209  0.349740  1.000000


cosine_matrix.iloc[-20:, -20:]
       3516  3517  3518  3519  3520  ...   3531  3532  3533  3534  3535
3516   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3517   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3518   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3519   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3520   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3521   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3522   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3523   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3524   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3525   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3526   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3527   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3528   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3529   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3530   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3531   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3532   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3533   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3534   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0
3535   0.0   0.0   0.0   0.0   0.0  ...    0.0   0.0   0.0   0.0   0.0


添加所有文档用时: 5.313372850418091
计算余弦相似度用时: 588.40886759758

recommendation_matrix.iloc[:20, :20]:
     1125  1126  1127  1128  1129  1130  ...   1139  1140  1141  1142  1143  1144
1   3403  3139  3490  3356  3406  3362  ...   2496  3406  3406  3114  3220  3466
2   3494  3052  3506  3133  3388  2791  ...   1139  3388  3388  3383  3271  3477
3   1125  3271  3478  3402  2807  1130  ...   1912  3512  2807  3255  3074  3461
4   3116  3301  3439  3374  3402  1558  ...   1503  2807  3402  2968  3164  3513
5   3375  3302  3426  2952  3086  2882  ...   3499  2122  3474  3251  3114  2581
6   3111  3270  3419  3474  3356  2665  ...   2971  1793  2952  3074  3209  2053
7   3156  3269  3099  3406  2517  3092  ...   1635  1795  3429  3466  3341  2987
8   1152  3074  3259  3388  2952  3022  ...   3134  2517  3374  3220  3205  1144
9   2332  3462  3304  1128  2162  3343  ...   2785  3086  3512  3480  3081  1991
10  3448  3098  3403  3086  2122  2640  ...   3431  1766  3086  3098  3251  2643


recommendation_matrix.iloc[-20:, -20:]:
     3516  3517  3518  3519  3520  3521  ...   3530  3531  3532  3533  3534  3535
1   2231  2248  2356  2302  1705  2200  ...   2120  2386  2328  1785  2164  2319
2   1864  2135  2366  2043  2022  2015  ...   2036  2308  2186  2053  2386  2186
3   2357  2078  2188  1984  1702  2014  ...   2224  2348  2386  1960  2348  2318
4   2147  2179  2128  2106  1613  1899  ...   1698  2319  2348  2159  2319  2386
5   2047  2359  2292  2139  1721  1946  ...   1902  2186  2319  2030  2318  2348
6   1881  2286  2247  1749  2302  1843  ...   1733  2165  2308  1616  2165  2165
7   1395  2281  2286  1983  1584  2082  ...   1869  2232  2321  2132  2222  2239
8   2012  2290  2230  1827  2185  2051  ...   1630  2328  2232  1591  2186  2232
9   2168  2123  2149  1835  1984  2305  ...   2276  2340  2075  1663  2329  2338
10  2081  2128  2112  1830  2089  1744  ...   1631  2230  2343  1662  2232  2158


计算 推荐系数矩阵 用时: 1.753495216369629
计算 新闻推荐矩阵 用时: 78.54305982589722
677.8660060760012

-----------------------------------------------------------------

只能全量计算余弦相似度两遍, 不能取巧

cosine_matrix.iloc[:20, :20]:
           1130      1131      1132    ...         1147      1148      1149
1130  1.000000  0.227853  0.099264    ...     0.409237  0.321891 -0.005072
1131  0.227853  1.000000  0.277358    ...     0.234235  0.178926 -0.000227
1132  0.099264  0.277358  1.000000    ...     0.329049 -0.038623 -0.114209
1133  0.001090 -0.018818 -0.094107    ...    -0.099825  0.105355  0.172743
1134  0.148017 -0.037066 -0.143667    ...     0.007054  0.214205  0.462800
1135  0.003176 -0.209107 -0.239135    ...    -0.025020 -0.071014 -0.140226
1136  0.199572  0.175377  0.274193    ...     0.176764 -0.116503  0.360512
1137  0.155313 -0.021635  0.072588    ...     0.066829 -0.104018  0.027979
1138  0.173362  0.015660  0.029960    ...     0.012430 -0.092257  0.289878
1139  0.188557  0.169170  0.119758    ...     0.292092  0.006233 -0.110852
1140  0.091925 -0.041742  0.076770    ...    -0.067438 -0.163084 -0.172907
1141  0.055392 -0.223593  0.156357    ...    -0.021228 -0.230084 -0.061559
1142  0.157565  0.036132  0.229600    ...     0.038490 -0.037287  0.171602
1143  0.129521  0.051139  0.160199    ...     0.056273 -0.155602  0.279396
1144  0.004192 -0.151080  0.237880    ...     0.136041  0.008538  0.073578
1145 -0.075592 -0.162328  0.110378    ...    -0.067480  0.078170  0.120073
1146  0.000650 -0.107057 -0.048988    ...    -0.204986 -0.009448  0.122014
1147  0.409237  0.234235  0.329049    ...     1.000000  0.117881 -0.037906
1148  0.321891  0.178926 -0.038623    ...     0.117881  1.000000  0.095485
1149 -0.005072 -0.000227 -0.114209    ...    -0.037906  0.095485  1.000000


cosine_matrix.iloc[-20:, -20:]
           3516      3517      3518    ...         3533      3534      3535
3516  1.000000  0.041371 -0.188405    ...     0.040788 -0.091648 -0.100829
3517  0.041371  0.999999  0.484746    ...    -0.082185  0.179046  0.178562
3518 -0.188405  0.484746  1.000000    ...    -0.056408  0.500702  0.606479
3519  0.043990  0.106800  0.109128    ...    -0.059431  0.582036  0.452431
3520  0.190747  0.057746  0.090385    ...     0.040109  0.549677  0.401657
3521  0.026989  0.135376  0.200964    ...    -0.101577 -0.236169 -0.109631
3522  0.000392  0.223860  0.469062    ...    -0.122770  0.312744  0.510628
3523  0.000399  0.021522  0.339281    ...    -0.135104  0.333291  0.428671
3524  0.124261  0.334535  0.525429    ...    -0.166840  0.119050  0.254951
3525 -0.176890  0.407946  0.691055    ...     0.012979  0.832058  0.790216
3526 -0.005287  0.183148  0.194937    ...    -0.129296  0.277276  0.387556
3527  0.544527  0.390393  0.143445    ...    -0.021410  0.196935  0.236449
3528 -0.027578 -0.113956 -0.104609    ...     0.225566  0.546403  0.330109
3529 -0.010404  0.175478  0.196431    ...    -0.132563  0.286678  0.402733
3530 -0.046815  0.117507  0.202270    ...    -0.054838 -0.093805 -0.032287
3531 -0.152141  0.315140  0.646841    ...     0.070140  0.796734  0.861713
3532 -0.136072  0.083243  0.612286    ...     0.059020  0.618231  0.772743
3533  0.040788 -0.082185 -0.056408    ...     1.000000  0.148746  0.119183
3534 -0.091648  0.179046  0.500702    ...     0.148746  1.000000  0.897565
3535 -0.100829  0.178562  0.606479    ...     0.119183  0.897565  1.000000


添加所有文档用时: 6.240095853805542
计算余弦相似度用时: 735.1173145771027
余弦相似度矩阵 计算完成! 2020-03-18 09:51:21.699220


recommendation_matrix.iloc[:, :20]:
     1130  1131  1132  1133  1134  1135  ...   1144  1145  1146  1147  1148  1149
1   3362  3019  2838  3292  3054  3392  ...   3466  3426  3341  3224  2892  3416
2   2791  3355  3454  3426  3330  3442  ...   3477  3419  3116  3343  3393  3371
3   1130  2048  1132  3490  3131  3379  ...   3461  3439  3121  2665  2955  2727
4   1558  3418  3301  3528  3387  3165  ...   3513  3180  2962  3427  2874  2071
5   2882  2157  2110  3459  3506  2841  ...   2581  3528  3255  1147  1148  3441
6   2665  2167  3195  3478  3229  3357  ...   2053  3259  1146  1695  3494  1149
7   3092  3308  3418  3419  3242  3333  ...   2987  3478  3251  1480  2751  2881
8   3022  2015  3270  3439  2770  3350  ...   1144  3403  2787  2207  3207  3506
9   3343  1828  2153  3099  3417  3127  ...   1991  2169  2709  1810  3372  3136
10  2640  1982  3305  2926  3338  3319  ...   2643  3304  2608  2093  3208  3404


recommendation_matrix.iloc[:, -20:]:
     3516  3517  3518  3519  3520  3521  ...   3530  3531  3532  3533  3534  3535
1   3453  3497  3435  3459  3519  3400  ...   3369  3535  3531  3466  3535  3534
2   3449  3299  3508  3399  3184  3488  ...   3436  3525  3535  3477  3525  3531
3   3451  3415  3463  3479  3399  2616  ...   3160  3534  3327  3461  3531  3525
4   3486  3128  3318  3412  3260  3137  ...   3006  3532  3223  2581  3505  3387
5   2861  3396  3296  3123  3292  3248  ...   2930  3485  2929  2761  3288  3485
6   2766  3452  3290  3520  3459  2436  ...   2590  3435  3435  3383  3409  3495
7   2871  3424  3507  3307  3030  3308  ...   2615  3495  3218  3513  3485  3532
8   3228  3489  3280  3197  3166  2838  ...   2862  3505  3113  2086  3059  3338
9   2932  2852  3496  2867  3282  2498  ...   2119  3409  3365  1785  2864  3288
10  2666  3303  3234  3174  2837  2811  ...   2120  3482  3423  2987  3495  3285


计算 推荐系数矩阵 用时: 1.828047513961792
计算 新闻推荐矩阵 用时: 75.13825726509094
823.8352631579983


